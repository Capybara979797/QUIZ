<!doctype html>
<html lang="ro">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width,initial-scale=1" />
  <title>Ghicește cuvântul</title>
  <style>
    :root{
      --bg1:#07150f; --bg2:#061a14;
      --stroke: rgba(255,255,255,.16);
      --text: rgba(255,255,255,.92);
      --accent:#6ee7b7;
      --warn:#fbbf24; --bad:#fb7185; --good:#22c55e;
      --shadow: 0 20px 60px rgba(0,0,0,.55);
      --radius: 22px;
    }
    *{box-sizing:border-box}
    html,body{height:100%}
    body{
      margin:0;
      font-family: ui-sans-serif, system-ui, -apple-system, Segoe UI, Roboto, Arial;
      color:var(--text);
      background:
        radial-gradient(1200px 800px at 30% 10%, rgba(110,231,183,.10), transparent 60%),
        radial-gradient(900px 700px at 85% 35%, rgba(52,211,153,.10), transparent 55%),
        linear-gradient(145deg, var(--bg1), var(--bg2));
      overflow:hidden;
    }

    /* animated blobs */
    .blob{position:absolute;width:420px;height:420px;filter:blur(40px);opacity:.35;border-radius:999px;mix-blend-mode:screen;animation:drift 14s ease-in-out infinite;pointer-events:none}
    .b1{background:radial-gradient(circle at 30% 30%, rgba(110,231,183,.95), transparent 60%);top:-120px;left:-80px;animation-duration:16s}
    .b2{background:radial-gradient(circle at 60% 40%, rgba(52,211,153,.90), transparent 60%);bottom:-140px;right:-120px;animation-duration:18s}
    .b3{background:radial-gradient(circle at 40% 50%, rgba(251,191,36,.80), transparent 60%);top:45%;left:60%;width:340px;height:340px;opacity:.22;animation-duration:20s}
    @keyframes drift{0%{transform:translate3d(0,0,0) scale(1)}50%{transform:translate3d(40px,-30px,0) scale(1.08)}100%{transform:translate3d(0,0,0) scale(1)}}

    /* background canvas */
    #fx{position:absolute;inset:0;width:100%;height:100%;z-index:0}

    /* floating leaves */
    .leaf{position:absolute;width:64px;height:64px;opacity:.18;filter:drop-shadow(0 10px 20px rgba(0,0,0,.35));animation:floaty 9s ease-in-out infinite;pointer-events:none;z-index:1}
    .l1{top:10%;left:15%;animation-duration:10.5s;transform:rotate(12deg)}
    .l2{top:18%;right:14%;animation-duration:12.5s;transform:rotate(-18deg)}
    .l3{bottom:14%;left:20%;animation-duration:11.5s;transform:rotate(24deg)}
    .l4{bottom:10%;right:22%;animation-duration:13.5s;transform:rotate(-8deg)}
    @keyframes floaty{0%,100%{transform:translateY(0) rotate(var(--r,0deg))}50%{transform:translateY(-18px) rotate(calc(var(--r,0deg)+6deg))}}

    /* layout */
    .wrap{position:relative;z-index:2;height:100%;display:grid;place-items:center;padding:clamp(14px,3vw,28px)}
    .card{
      width:min(980px, 92vw);
      border-radius:var(--radius);
      background:linear-gradient(135deg, rgba(255,255,255,.10), rgba(255,255,255,.06));
      border:1px solid var(--stroke);
      box-shadow:var(--shadow);
      backdrop-filter:blur(14px);
      -webkit-backdrop-filter:blur(14px);
      overflow:hidden;
    }

    .topbar{
      display:flex;align-items:center;justify-content:space-between;gap:16px;
      padding:14px 16px;border-bottom:1px solid rgba(255,255,255,.12);
      background:rgba(0,0,0,.10);
    }
    .left{display:flex;align-items:center;gap:10px}
    .badge{
      width:34px;height:34px;border-radius:12px;
      background:linear-gradient(135deg, rgba(110,231,183,.25), rgba(52,211,153,.18));
      border:1px solid rgba(255,255,255,.16);
      display:grid;place-items:center;box-shadow:0 10px 30px rgba(0,0,0,.25)
    }
    .pill{
      padding:7px 10px;border-radius:999px;
      border:1px solid rgba(255,255,255,.14);
      background:rgba(255,255,255,.06);
      display:flex;align-items:center;gap:8px;
      color: rgba(255,255,255,.82);
      font-size: 13px;
    }
    .dot{width:8px;height:8px;border-radius:50%;background:var(--accent);box-shadow:0 0 0 6px rgba(110,231,183,.12)}
    .count{font-weight:800;letter-spacing:.3px;color:rgba(255,255,255,.92)}

    .main{
      padding:18px;
      transition: opacity .22s ease, transform .22s ease;
      will-change: opacity, transform;
    }
    .main.swap{
      opacity:0;
      transform: translateY(8px);
    }

    .slots{
      display:flex;flex-wrap:wrap;gap:10px;
      padding: 10px 0 6px 0;
      min-height: 100px;
      align-items:center;
      justify-content:center;
    }

    .slot{
      width:52px;height:62px;border-radius:16px;
      border:1px solid rgba(255,255,255,.14);
      background:linear-gradient(135deg, rgba(255,255,255,.08), rgba(255,255,255,.05));
      display:grid;place-items:center;position:relative;overflow:hidden;
      box-shadow:0 12px 30px rgba(0,0,0,.18);
      transform: translateY(0) scale(1);
      transition: transform .22s ease, box-shadow .22s ease, border-color .22s ease;
      will-change: transform;
    }
    .slot::after{
      content:"";position:absolute;inset:-40% -40%;
      background:
        radial-gradient(circle at 30% 20%, rgba(110,231,183,.20), transparent 40%),
        radial-gradient(circle at 70% 60%, rgba(52,211,153,.16), transparent 42%);
      transform:rotate(18deg);opacity:.65;pointer-events:none;
    }

    .letter{
      font-size:22px;font-weight:800;letter-spacing:.5px;position:relative;z-index:1;
      opacity:0;transform:translateY(10px) scale(.96);
      transition:opacity .22s ease, transform .22s cubic-bezier(.2,.9,.2,1);
    }

    .slot.revealed{
      transform: translateY(-2px) scale(1.02);
      border-color: rgba(110,231,183,.28);
      box-shadow: 0 18px 40px rgba(0,0,0,.26);
    }
    .slot.revealed .letter{
      opacity:1;
      transform:translateY(0) scale(1);
    }

    .underline{position:absolute;bottom:14px;width:22px;height:2px;background:rgba(255,255,255,.38);border-radius:999px;z-index:1}

    .controls{
      display:flex;flex-wrap:wrap;gap:10px;
      justify-content:center;
      margin-top: 12px;
    }
    button{
      appearance:none;border:none;cursor:pointer;border-radius:14px;
      padding:11px 12px;color:rgba(255,255,255,.94);
      background:rgba(255,255,255,.08);
      border:1px solid rgba(255,255,255,.16);
      transition:transform .12s ease, background .2s ease, border-color .2s ease;
      box-shadow:0 12px 28px rgba(0,0,0,.18);
      font-weight:800;letter-spacing:.2px;
      min-width: 130px;
    }
    button:hover{transform:translateY(-1px);background:rgba(255,255,255,.11);border-color:rgba(255,255,255,.22)}
    button:active{transform:translateY(0) scale(.99)}
    .primary{background:linear-gradient(135deg, rgba(110,231,183,.22), rgba(52,211,153,.16));border-color:rgba(110,231,183,.30)}
    .danger{background:linear-gradient(135deg, rgba(251,113,133,.20), rgba(251,113,133,.10));border-color:rgba(251,113,133,.26)}
    .ghost{background:rgba(0,0,0,.12);border-color:rgba(255,255,255,.14)}

    .guessRow{
      display:flex;
      gap:10px;
      margin-top: 14px;
      justify-content:center;
      align-items:center;
      flex-wrap:wrap;
    }
    input{
      width:min(520px, 92vw);
      padding:12px 12px;border-radius:14px;
      border:1px solid rgba(255,255,255,.16);
      background:rgba(0,0,0,.18);
      color:rgba(255,255,255,.92);
      outline:none;font-weight:800;letter-spacing:.3px;
      transition: border-color .2s ease, transform .12s ease;
    }
    input:focus{ border-color: rgba(110,231,183,.35); transform: translateY(-1px); }
    input::placeholder{color:rgba(255,255,255,.45);font-weight:700}

    .msg{
      margin-top: 10px;
      min-height: 22px;
      font-size: 14px;
      text-align:center;
      font-weight: 800;
      letter-spacing: .2px;
      color: rgba(255,255,255,.78);
      transition: opacity .2s ease;
    }
    .msg.good{ color: rgba(34,197,94,.95); }
    .msg.bad{ color: rgba(251,113,133,.95); }

    /* Confetti */
    .confetti{position:absolute;inset:0;pointer-events:none;z-index:3;overflow:hidden}
    .piece{position:absolute;width:10px;height:14px;border-radius:3px;opacity:.95;animation:fall 1.25s ease-in forwards}
    @keyframes fall{0%{transform:translateY(-20px) rotate(0deg);opacity:1}100%{transform:translateY(110vh) rotate(540deg);opacity:0}}
  </style>
</head>
<body>
  <canvas id="fx"></canvas>
  <div class="blob b1"></div><div class="blob b2"></div><div class="blob b3"></div>

  <svg class="leaf l1" style="--r:12deg" viewBox="0 0 64 64" fill="none">
    <path d="M50 14C40 8 24 10 16 18C8 26 10 42 16 50C24 58 40 56 50 50C60 44 60 20 50 14Z" fill="rgba(110,231,183,.9)"/>
    <path d="M20 46C30 36 38 26 46 18" stroke="rgba(255,255,255,.55)" stroke-width="2" stroke-linecap="round"/>
  </svg>
  <svg class="leaf l2" style="--r:-18deg" viewBox="0 0 64 64" fill="none">
    <path d="M52 18C42 10 26 10 18 18C10 26 10 42 18 50C26 58 42 58 52 50C62 42 62 26 52 18Z" fill="rgba(52,211,153,.9)"/>
    <path d="M22 46C30 36 38 28 48 20" stroke="rgba(255,255,255,.55)" stroke-width="2" stroke-linecap="round"/>
  </svg>
  <svg class="leaf l3" style="--r:24deg" viewBox="0 0 64 64" fill="none">
    <path d="M48 12C38 10 22 16 16 26C10 36 14 48 22 54C30 60 44 56 52 46C60 36 58 14 48 12Z" fill="rgba(251,191,36,.85)"/>
    <path d="M20 48C28 38 36 30 48 18" stroke="rgba(255,255,255,.55)" stroke-width="2" stroke-linecap="round"/>
  </svg>
  <svg class="leaf l4" style="--r:-8deg" viewBox="0 0 64 64" fill="none">
    <path d="M50 16C40 10 26 12 18 20C10 28 12 42 18 50C24 58 40 56 50 50C60 44 60 22 50 16Z" fill="rgba(110,231,183,.75)"/>
    <path d="M22 46C30 36 40 28 46 20" stroke="rgba(255,255,255,.55)" stroke-width="2" stroke-linecap="round"/>
  </svg>

  <div class="wrap">
    <div class="card">
      <div class="topbar">
        <div class="left">
          <div class="badge" aria-hidden="true">
            <svg width="18" height="18" viewBox="0 0 24 24" fill="none">
              <path d="M12 3c4 3 6 6 6 10a6 6 0 1 1-12 0c0-4 2-7 6-10Z" stroke="rgba(255,255,255,.9)" stroke-width="1.6"/>
              <path d="M10 14c2-1 4-3 5-6" stroke="rgba(255,255,255,.7)" stroke-width="1.6" stroke-linecap="round"/>
            </svg>
          </div>
          <div class="pill"><span class="dot"></span> <span class="count" id="roundText">Runda 1/5</span></div>
        </div>
        <div class="pill"><span>Litere:</span> <span class="count" id="revealCount">0</span></div>
      </div>

      <div class="main" id="main">
        <div class="slots" id="slots"></div>

        <div class="controls">
          <button class="primary" id="btnRevealLetter">Literă</button>
          <button class="danger" id="btnRevealWord">Cuvânt</button>
          <button class="ghost" id="btnPrevWord">Înapoi</button>
          <button class="ghost" id="btnNextWord">Următorul</button>
          <button class="ghost" id="btnReset">Reset</button>
        </div>

        <div class="guessRow">
          <input id="guess" placeholder="Scrie răspunsul…" autocomplete="off" />
          <button class="primary" id="btnCheck">Verifică</button>
        </div>

        <div class="msg" id="msg"></div>
      </div>

      <div class="confetti" id="confetti"></div>
    </div>
  </div>

  <script>
    // Cuvintele (nu se afișează nicăieri ca listă).
    const WORDS = ["FOTOSINTEZĂ","GLUCOZĂ","CLOROFILĂ","STOMATE","POLENIZARE"];
    const AUTO_NEXT_ON_CORRECT = true;

    const $ = (id) => document.getElementById(id);

    function normalizeText(s){
      return (s || "")
        .toString()
        .trim()
        .toUpperCase()
        .normalize("NFD").replace(/[\u0300-\u036f]/g, "");
    }

    let index = 0;
    let revealed = [];
    let revealedCount = 0;

    const mainEl = $("main");
    const slotsEl = $("slots");
    const msgEl = $("msg");
    const roundTextEl = $("roundText");
    const revealCountEl = $("revealCount");
    const guessEl = $("guess");
    const confettiEl = $("confetti");

    function renderSlots(word){
      slotsEl.innerHTML = "";
      [...word].forEach((ch) => {
        const slot = document.createElement("div");
        slot.className = "slot";

        const letter = document.createElement("div");
        letter.className = "letter";
        letter.textContent = ch;

        const underline = document.createElement("div");
        underline.className = "underline";

        slot.appendChild(letter);
        slot.appendChild(underline);
        slotsEl.appendChild(slot);
      });
    }

    function updateSlotReveal(){
      const slots = slotsEl.querySelectorAll(".slot");
      slots.forEach((slot, i) => {
        slot.classList.toggle("revealed", !!revealed[i]);
      });
      revealCountEl.textContent = String(revealedCount);
    }

    function setMsg(text, type){
      msgEl.className = "msg" + (type ? (" " + type) : "");
      msgEl.textContent = text || "";
    }

    // smooth transition between words
    function startRoundSmooth(){
      mainEl.classList.add("swap");
      setTimeout(() => {
        startRoundCore();
        mainEl.classList.remove("swap");
      }, 160);
    }

    function startRoundCore(){
      const word = WORDS[index];
      revealed = new Array([...word].length).fill(false);
      revealedCount = 0;
      roundTextEl.textContent = `Runda ${index + 1}/${WORDS.length}`;
      renderSlots(word);
      updateSlotReveal();
      guessEl.value = "";
      setMsg("", "");
    }

    function startRound(){ startRoundCore(); }

    // reveal a random hidden letter (not sequential)
    function revealRandomLetter(){
      const word = WORDS[index];
      const letters = [...word];
      const hiddenIdx = [];
      for (let i = 0; i < letters.length; i++){
        if (letters[i] !== " " && !revealed[i]) hiddenIdx.push(i);
      }
      if (!hiddenIdx.length) return;

      const pick = hiddenIdx[Math.floor(Math.random() * hiddenIdx.length)];
      revealed[pick] = true;
      revealedCount++;
      updateSlotReveal();
    }

    function revealWholeWord(){
      for (let i = 0; i < revealed.length; i++) revealed[i] = true;
      revealedCount = revealed.length;
      updateSlotReveal();
    }

    function nextWord(){
      index = (index + 1) % WORDS.length;
      startRoundSmooth();
    }

    function prevWord(){
      index = (index - 1 + WORDS.length) % WORDS.length;
      startRoundSmooth();
    }

    function resetRound(){
      startRoundSmooth();
    }

    function launchConfetti(){
      confettiEl.innerHTML = "";
      const colors = ["rgba(110,231,183,.95)","rgba(52,211,153,.95)","rgba(251,191,36,.95)","rgba(255,255,255,.9)","rgba(251,113,133,.95)"];
      const pieces = 70;
      for (let i = 0; i < pieces; i++){
        const p = document.createElement("div");
        p.className = "piece";
        p.style.left = (Math.random() * 100) + "vw";
        p.style.top = (-10 - Math.random() * 30) + "px";
        p.style.background = colors[(Math.random()*colors.length)|0];
        p.style.animationDelay = (Math.random() * 0.12) + "s";
        p.style.animationDuration = (1.0 + Math.random() * 0.7) + "s";
        confettiEl.appendChild(p);
      }
      setTimeout(() => { confettiEl.innerHTML = ""; }, 1700);
    }

    function checkGuess(){
      const actual = WORDS[index];
      const g = guessEl.value || "";
      if (!g.trim()) return;

      if (normalizeText(g) === normalizeText(actual)){
        revealWholeWord();
        launchConfetti();
        setMsg("CORECT!", "good");
        if (AUTO_NEXT_ON_CORRECT){
          setTimeout(() => nextWord(), 900);
        }
      } else {
        setMsg("GREȘIT!", "bad");
      }
    }

    $("btnRevealLetter").addEventListener("click", revealRandomLetter);
    $("btnRevealWord").addEventListener("click", revealWholeWord);
    $("btnNextWord").addEventListener("click", nextWord);
    $("btnPrevWord").addEventListener("click", prevWord);
    $("btnReset").addEventListener("click", resetRound);
    $("btnCheck").addEventListener("click", checkGuess);
    guessEl.addEventListener("keydown", (e) => { if (e.key === "Enter") checkGuess(); });

    // Background particles
    const canvas = $("fx");
    const ctx = canvas.getContext("2d", { alpha: true });

    function resize(){
      canvas.width = Math.floor(window.innerWidth * devicePixelRatio);
      canvas.height = Math.floor(window.innerHeight * devicePixelRatio);
      canvas.style.width = "100%";
      canvas.style.height = "100%";
      ctx.setTransform(devicePixelRatio,0,0,devicePixelRatio,0,0);
    }
    window.addEventListener("resize", resize);

    const particles = [];
    const PCOUNT = 90;
    const rand = (min,max) => min + Math.random()*(max-min);

    function initParticles(){
      particles.length = 0;
      for (let i=0;i<PCOUNT;i++){
        particles.push({
          x: rand(0, window.innerWidth),
          y: rand(0, window.innerHeight),
          r: rand(1.2, 3.2),
          vx: rand(-0.22, 0.22),
          vy: rand(-0.18, 0.18),
          a: rand(0.18, 0.55)
        });
      }
    }

    function draw(){
      ctx.clearRect(0,0,window.innerWidth, window.innerHeight);

      const g = ctx.createRadialGradient(
        window.innerWidth*0.5, window.innerHeight*0.45, 80,
        window.innerWidth*0.5, window.innerHeight*0.45, window.innerWidth*0.85
      );
      g.addColorStop(0, "rgba(255,255,255,0.00)");
      g.addColorStop(1, "rgba(0,0,0,0.32)");
      ctx.fillStyle = g;
      ctx.fillRect(0,0,window.innerWidth, window.innerHeight);

      for (const p of particles){
        p.x += p.vx; p.y += p.vy;
        if (p.x < -20) p.x = window.innerWidth + 20;
        if (p.x > window.innerWidth + 20) p.x = -20;
        if (p.y < -20) p.y = window.innerHeight + 20;
        if (p.y > window.innerHeight + 20) p.y = -20;

        ctx.beginPath();
        ctx.arc(p.x, p.y, p.r, 0, Math.PI*2);
        ctx.fillStyle = `rgba(110,231,183,${p.a})`;
        ctx.fill();
      }

      for (let i=0;i<particles.length;i++){
        for (let j=i+1;j<particles.length;j++){
          const a = particles[i], b = particles[j];
          const dx = a.x-b.x, dy = a.y-b.y;
          const d2 = dx*dx+dy*dy;
          if (d2 < 120*120){
            const alpha = 0.10 * (1 - Math.sqrt(d2)/120);
            ctx.strokeStyle = `rgba(255,255,255,${alpha})`;
            ctx.lineWidth = 1;
            ctx.beginPath();
            ctx.moveTo(a.x,a.y);
            ctx.lineTo(b.x,b.y);
            ctx.stroke();
          }
        }
      }

      requestAnimationFrame(draw);
    }

    // Start
    resize();
    initParticles();
    draw();
    startRound();
  </script>
</body>
</html>
